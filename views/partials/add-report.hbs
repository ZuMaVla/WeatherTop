{{#each stations}}
  <label class="title is-4">Enter Weather Details:</label>
  <form class="box" action="/station/{{_id}}/addreport" method="POST">
    <div class="field is-horizontal">
      <div class="field-body is-align-items-flex-end">
        <div class="field">
          <label class="label">Code</label>
          <div class="control">
            <input class="input" type="text" placeholder="00" name="code">
          </div>
        </div>
        <div class="field">
          <label class="label">Temperature, Â°C</label>
          <div class="control">
            <input class="input" type="number" step="0.1" placeholder="0.0" name="temperature">
          </div>
        </div>
        <div class="field">
          <label class="label">Wind Speed, km/h</label>
          <div class="control">        
            <input class="input" type="text" placeholder="00" name="windSpeed">
          </div>
        </div>
        <div class="field">
          <label class="label">Wind Direction</label>
          <div class="control select">        
            <select name="windDirection">
              <option value="N">348.76-11.25</option>
              <option value="N/NE">11.26-33.75</option>
              <option value="NE">33.76-56.25</option>
              <option value="E/NE">56.26-78.75</option>
              <option value="E">78.76-101.25</option>
              <option value="E/SE">101.26-123.75</option>
              <option value="SE">123.76-146.25</option>
              <option value="S/SE">146.26-168.75</option>
              <option value="S">168.76-191.25</option>
              <option value="S/SW">191.26-213.75</option>
              <option value="SW">213.76-236.25</option>
              <option value="W/SW">236.26-258.75</option>
              <option value="W">258.76-281.25</option>
              <option value="W/NW">281.26-303.75</option>
              <option value="NW">303.76-326.25</option>
              <option value="N/NW">326.26-348.75</option>
            </select>
          </div>
        </div>
        <div class="field">
          <label class="label">Pressure, mbar</label>
          <div class="control">        
            <input class="input" type="text" placeholder="1040" name="pressure">
          </div>
        </div>
        <button id="retrieveDataButton" class="button is-info">Retrieve Data from OpenWeather</button>&nbsp;&nbsp;
        <button class="button is-primary">Submit Report</button>
      </div>
    </div>

  </form>
{{/each}}

<script>
  document.addEventListener("DOMContentLoaded", function() {              // Adding listener only after DOM fully loaded

    const retrieveDataButton = document.getElementById("retrieveDataButton");

    retrieveDataButton.addEventListener("click", function(event) {           // Adding a "onClick" event listener to the "Retrieve Data" button
      event.preventDefault();                                             // This button is not supposed to submit the form
      const lat = stations[0].latitude;
      const lon = stations[0].longitude;

      const weatherRequestUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=0aa8a56676edc13091118eace86a7726`
      console.log('Retrieving data from OpenWeather...');
      
    });
  });
</script>
